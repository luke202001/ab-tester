/// <reference types="node" />
import { IncomingMessage } from 'http';
import { Readable, Writable } from 'stream';
import { ZlibOptions } from 'zlib';
import { IODataSource } from './IODataSource';
import { AppBundleLinked, AppFilesList, AppManifest } from './responses';
export declare class Apps extends IODataSource {
    protected httpClientFactory: import("./IODataSource").HttpClientFactory;
    protected service: string;
    installApp: (descriptor: string) => Promise<void>;
    uninstallApp: (app: string) => Promise<import("./HttpClient").IOResponse<void>>;
    acknowledgeApp: (app: string, service: string) => Promise<void>;
    link: (app: string, files: Change[], { zlib }?: ZipOptions) => Promise<AppBundleLinked>;
    patch: (app: string, changes: Change[], { zlib }?: ZipOptions) => Promise<void>;
    unlink: (app: string) => Promise<import("./HttpClient").IOResponse<void>>;
    unlinkAll: () => Promise<import("./HttpClient").IOResponse<void>>;
    saveAppSettings: (app: string, settings: any) => Promise<void>;
    listApps: ({ oldVersion, context, since, service }?: ListAppsOptions) => Promise<AppsList>;
    listAppFiles: (app: string, { prefix, context, nextMarker }?: ListFilesOptions) => Promise<AppFilesList>;
    listLinks: () => Promise<string[]>;
    getAppFile: (app: string, path: string, context?: string[]) => Promise<{
        data: Buffer;
        headers: any;
    }>;
    getAppFileStream: (app: string, path: string, context?: string[]) => Promise<IncomingMessage>;
    getApp: (app: string, context?: string[]) => Promise<AppManifest>;
    getAppSettings: (app: string) => Promise<any>;
    getAllAppsSettings: (listAppsOptions?: ListAppsOptions) => Promise<AppsSettings>;
    getAppBundle: (app: string, bundlePath: string, generatePackageJson: boolean) => Promise<Readable>;
    unpackAppBundle: (app: string, bundlePath: string, unpackPath: string, generatePackageJson: boolean) => Promise<Writable>;
    getDependencies: (filter?: string) => Promise<Record<string, string[]>>;
    updateDependencies: () => Promise<Record<string, string[]>>;
    updateDependency: (name: string, version: string, registry: string) => Promise<void>;
    resolveDependencies: (apps: string[], registries: string[], filter?: string) => Promise<any>;
}
interface ZipOptions {
    zlib?: ZlibOptions;
}
export interface AppsListItem {
    app: string;
    id: string;
    location: string;
}
export interface AppsList {
    data: AppsListItem[];
}
export interface Change {
    path: string;
    content: string | Readable | Buffer;
}
export interface ListAppsOptions {
    oldVersion?: string;
    context?: string[];
    since?: string;
    service?: string;
}
export interface ListFilesOptions {
    prefix?: string;
    context?: string[];
    nextMarker?: string;
}
export interface AppsSettings {
    [app: string]: any;
}
export {};
